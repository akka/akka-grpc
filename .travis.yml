language: scala
scala:
- 2.12.6
git:
  depth: false
jobs:
  include:
  - stage: tests
    script: cd gradle-plugin && md5sum gradle.properties && grep key gradle.properties
stages:
- name: tests
  if: NOT tag =~ ^v
before_cache:
- find $HOME/.ivy2 -name "ivydata-*.properties" -print -delete
- find $HOME/.sbt  -name "*.lock"               -print -delete
cache:
  directories:
  - "$HOME/.ivy2/cache"
  - "$HOME/.sbt/boot"
  - "$HOME/.gradle"
before_install:
- openssl aes-256-cbc -K $encrypted_9c9c33071881_key -iv $encrypted_9c9c33071881_iv
  -in gradle.properties.enc -out ./gradle-plugin/gradle.properties -d
